(this["webpackJsonpweather-exercise-react"]=this["webpackJsonpweather-exercise-react"]||[]).push([[0],{220:function(e,t,r){},221:function(e,t,r){},363:function(e,t,r){"use strict";r.r(t);var a,n=r(0),c=r.n(n),i=r(26),o=r.n(i),s=(r(220),r(221),r(114)),u=r(410),l=r(411),d=r(389),j=r(408),f=r(4),b=function(e){var t=e.unit,r=e.unitChange;return Object(f.jsx)(u.a,{component:"fieldset",children:Object(f.jsxs)(l.a,{row:!0,"aria-label":"temperature-unit",name:"unit",value:t,onChange:function(e){r(e.target.value)},children:[Object(f.jsx)(d.a,{value:"celsius",control:Object(f.jsx)(j.a,{}),label:"Celsius"}),Object(f.jsx)(d.a,{value:"fahrenheit",control:Object(f.jsx)(j.a,{}),label:"Fahrenheit"})]})})},h=r(391),O=r(398),C=r(364),x=r(406);!function(e){e.left="left",e.right="right"}(a||(a={}));var m,g=r(392),p=r(393),v=r(394),D=Object(h.a)({root:{marginRight:20,marginLeft:20}}),_=function(e){var t=e.direction,r=e.disabled,n=e.onButtonClick,c=D();return Object(f.jsxs)(g.a,{color:"primary",disabled:r,className:c.root,"aria-label":t,onClick:function(){return n(t)},children:[t===a.left&&Object(f.jsx)(p.a,{}),t===a.right&&Object(f.jsx)(v.a,{})]})},E=r(395),A=r(396),y=r(405),R=Object(h.a)({root:{marginRight:10,marginLeft:10,minWidth:200,maxWidth:200},card:{textAlign:"center","&:hover, &:focus":{cursor:"pointer"}}}),w=function(e){var t=e.cardData,r=e.onCardClick,a=R();return Object(f.jsx)(E.a,{onClick:function(){return r(t.date)},className:a.root,children:Object(f.jsxs)(A.a,{className:a.card,children:[Object(f.jsx)(C.a,{children:"Temperature"}),Object(f.jsx)(C.a,{children:Object(f.jsx)("strong",{children:t.averageTemperature})}),Object(f.jsx)(C.a,{children:Object(y.a)(new Date(t.date),"dd MMM. yyyy")})]})})},F=Object(h.a)({root:{display:"flex",flexDirection:"row"}}),S=function(e){var t=e.weatherList,r=e.onCardClick,a=F();return Object(f.jsx)("div",{className:a.root,children:null===t||void 0===t?void 0:t.map((function(e,t){return Object(f.jsx)(w,{cardData:e,onCardClick:function(e){return r(e)}},t)}))})},k=Object(h.a)({root:{display:"flex",alignItems:"center",justifyContent:"center"}}),L=function(e){var t=e.weatherList,r=e.onCarouselButtonClick,n=e.leftButtonDisabled,c=e.rightButtonDisabled,i=e.onCardClick,o=k();return Object(f.jsxs)("div",{className:o.root,children:[Object(f.jsx)(_,{direction:a.left,disabled:n,onButtonClick:r}),Object(f.jsx)(S,{weatherList:t,onCardClick:i}),Object(f.jsx)(_,{direction:a.right,disabled:c,onButtonClick:r})]})};!function(e){e[e.Idle=0]="Idle",e[e.Loading=1]="Loading",e[e.Success=2]="Success",e[e.Failure=3]="Failure"}(m||(m={}));var T,B,P=r(399),N=r(400),U=r(200),W=r(201),I=r(95),q=r(204),H=r(397),K=Object(h.a)({root:{display:"flex",height:"100vh",justifyContent:"center",alignItems:"center"}}),M=function(){var e=K();return Object(f.jsx)("div",{className:e.root,children:Object(f.jsx)(H.a,{})})},z=r(409),J=Object(h.a)({root:{paddingTop:150},toolbar:{display:"flex",justifyContent:"center",marginBottom:35},chart:{margin:"0 auto",marginTop:50},unit:{textAlign:"center"}}),Y=function(e){var t=e.weatherList,r=e.selectedCardData,c=e.selectWeatherCard,i=e.carouselLeftArrowDisabled,o=e.carouselRightArrowDisabled,s=e.temperatureUnit,u=e.temperatureUnitChange,l=e.carouselRightArrowClicked,d=e.carouselLeftArrowClicked,j=e.fetchForecasts,h=e.forecastsRequestStatus,g=e.fetchForecastAction;Object(n.useEffect)((function(){g()}),[g]);var p=J(),v=function(e){e===a.right?l():d()},D=function(){return Object(f.jsxs)("div",{className:p.root,children:[Object(f.jsxs)("div",{className:p.toolbar,children:[Object(f.jsx)(b,{unit:s,unitChange:u}),Object(f.jsx)(O.a,{variant:"contained",onClick:j,children:"Refresh"})]}),Object(f.jsx)(L,{onCardClick:function(e){return c(e)},rightButtonDisabled:o,leftButtonDisabled:i,weatherList:t,onCarouselButtonClick:v}),Object(f.jsx)(P.a,{width:800,height:500,className:p.chart,children:Object(f.jsxs)(N.a,{data:r,children:[Object(f.jsx)(U.a,{dataKey:"dt_txt"}),Object(f.jsx)(W.a,{}),Object(f.jsx)(I.a,{}),Object(f.jsx)(q.a,{dataKey:"main.temp",fill:"#8884d8"})]})}),Object(f.jsx)(C.a,{className:p.unit,children:s})]})},_=function(){return Object(f.jsx)(x.a,{open:!0,autoHideDuration:6e3,children:Object(f.jsx)(z.a,{elevation:6,variant:"filled",severity:"error",children:"An error occurred while fetching data!"})})};return Object(f.jsxs)(f.Fragment,{children:[h===m.Loading&&Object(f.jsx)(M,{}),h===m.Success&&Object(f.jsx)(D,{}),h===m.Failure&&Object(f.jsx)(_,{})]})},V=r(94),G=r(32);(B=T||(T={})).celsius="celsius",B.fahrenheit="fahrenheit";var Q,X=function(e){return Math.floor(e-273.15)},Z=function(e){return Math.floor(1.8*X(e)+32)},$=function(e){return e.forecast},ee=Object(G.a)([$],(function(e){return e.forecastDataByDay})),te=Object(G.a)([$],(function(e){return e.carouselCursor})),re=Object(G.a)([$],(function(e){return e.pageSize})),ae=Object(G.a)([$],(function(e){return e.temperatureUnit})),ne=Object(G.a)([$],(function(e){return e.loadForecastsRequestStatus})),ce=Object(G.a)([te],(function(e){return e<=0})),ie=Object(G.a)([$],(function(e){return e.selectedForecastCardDate})),oe=Object(G.a)([te,re,ee],(function(e,t,r){return e+t===Object.keys(r).length})),se=Object(G.a)([ee,te,re,ae],(function(e,t,r,a){var n=[];return Object.entries(e).forEach((function(e){var t=e[1],r=t.reduce((function(e,t){return e+t.main.temp}),0)/t.length;n.push({date:e[0],averageTemperature:a===T.celsius?"".concat(X(r),"C"):"".concat(Z(r),"F")})})),n.slice(t,t+r)})),ue=Object(G.a)([ee,ie,ae],(function(e,t,r){var a;return null===(a=e[t])||void 0===a?void 0:a.map((function(e){return Object(V.a)(Object(V.a)({},e),{},{main:Object(V.a)(Object(V.a)({},e.main),{},{temp:r===T.celsius?X(e.main.temp):Z(e.main.temp)}),dt_txt:Object(y.a)(new Date(e.dt_txt),"p")})}))})),le=r(43),de=r(75),je=r(74),fe=r.n(je),be=r(202),he=r(57),Oe=Object({NODE_ENV:"production",PUBLIC_URL:"/weather-exercise-react",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_OPEN_WEATHER_BASE_URL:"http://api.openweathermap.org/data/2.5/forecast",REACT_APP_OPEN_WEATHER_API_KEY:"4ac2da6104057e179b0927dfeaf02128"}),Ce=Oe.REACT_APP_OPEN_WEATHER_BASE_URL,xe=Oe.REACT_APP_OPEN_WEATHER_API_KEY,me=Ce,ge=xe,pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"M\xfcnchen,DE";return"".concat(me,"?q=").concat(e,"&appid=").concat(ge)},ve={pageSize:3,carouselCursor:0,selectedForecastCardDate:"",forecastDataByDay:{},temperatureUnit:T.celsius,loadForecastsRequestStatus:m.Idle},De="forecast",_e=Object(he.b)("".concat(De,"/fetchForecastData"),Object(be.a)(fe.a.mark((function e(){var t,r;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=pe(),e.next=3,fetch(t).then((function(e){return e.json()}));case 3:return r=e.sent,e.abrupt("return",r.list);case 5:case"end":return e.stop()}}),e)})))),Ee=Object(he.c)({name:De,initialState:ve,reducers:{incrementCursor:function(e){e.carouselCursor++},decrementCursor:function(e){e.carouselCursor--},temperatureUnitChange:function(e,t){e.temperatureUnit=t.payload},selectWeatherCard:function(e,t){e.selectedForecastCardDate=t.payload}},extraReducers:(Q={},Object(de.a)(Q,_e.pending,(function(e){e.loadForecastsRequestStatus=m.Loading})),Object(de.a)(Q,_e.fulfilled,(function(e,t){e.forecastDataByDay=function(e){var t={};return e.forEach((function(e){var r=e.dt_txt.split(" ")[0];t[r]?t[r].push(e):t[r]=[e]})),t}(t.payload),e.selectedForecastCardDate=Object.keys(e.forecastDataByDay)[0],e.loadForecastsRequestStatus=m.Success})),Object(de.a)(Q,_e.rejected,(function(e){e.loadForecastsRequestStatus=m.Failure})),Q)}),Ae=Ee.actions,ye=Ae.incrementCursor,Re=Ae.decrementCursor,we=Ae.temperatureUnitChange,Fe=Ae.selectWeatherCard;var Se=Object(s.b)((function(e){return{weatherList:se(e),temperatureUnit:ae(e),selectedCardData:ue(e),forecastsRequestStatus:ne(e),carouselLeftArrowDisabled:ce(e),carouselRightArrowDisabled:oe(e)}}),(function(e){return Object(le.b)({fetchForecastAction:_e,temperatureUnitChange:we,carouselRightArrowClicked:ye,carouselLeftArrowClicked:Re,fetchForecasts:_e,selectWeatherCard:Fe},e)}))(Y),ke=r(404);var Le=function(){return Object(f.jsx)(ke.a,{children:Object(f.jsx)(Se,{})})},Te=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,413)).then((function(t){var r=t.getCLS,a=t.getFID,n=t.getFCP,c=t.getLCP,i=t.getTTFB;r(e),a(e),n(e),c(e),i(e)}))},Be=Object(he.a)({reducer:{forecast:Ee.reducer}});o.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(s.a,{store:Be,children:Object(f.jsx)(Le,{})})}),document.getElementById("root")),Te()}},[[363,1,2]]]);
//# sourceMappingURL=main.dd6c492e.chunk.js.map