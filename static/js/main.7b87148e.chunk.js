(this["webpackJsonpweather-exercise-react"]=this["webpackJsonpweather-exercise-react"]||[]).push([[0],{220:function(e,t,r){},221:function(e,t,r){},363:function(e,t,r){"use strict";r.r(t);var a,n=r(0),c=r.n(n),i=r(26),o=r.n(i),s=(r(220),r(221),r(41)),u=r(388),l=r(406);!function(e){e[e.Idle=0]="Idle",e[e.Loading=1]="Loading",e[e.Success=2]="Success",e[e.Failure=3]="Failure"}(a||(a={}));var d,j,b=r(390),f=r(4),h=Object(u.a)({root:{display:"flex",height:"100vh",justifyContent:"center",alignItems:"center"}}),O=function(){var e=h();return Object(f.jsx)("div",{className:e.root,children:Object(f.jsx)(b.a,{})})},x=r(409),C=r(410),m=r(411),p=r(391),g=r(408),v=function(e){var t=e.unit,r=e.unitChange;return Object(f.jsx)(C.a,{component:"fieldset",children:Object(f.jsxs)(m.a,{row:!0,"aria-label":"temperature-unit",name:"unit",value:t,onChange:function(e){r(e.target.value)},children:[Object(f.jsx)(p.a,{value:"celsius",control:Object(f.jsx)(g.a,{}),label:"Celsius"}),Object(f.jsx)(p.a,{value:"fahrenheit",control:Object(f.jsx)(g.a,{}),label:"Fahrenheit"})]})})},D=r(393),_=Object(u.a)({toolbar:{display:"flex",justifyContent:"center",marginBottom:35}}),E=function(e){var t=e.temperatureUnit,r=e.temperatureUnitChange,a=e.fetchForecasts,n=_();return Object(f.jsxs)("div",{className:n.toolbar,children:[Object(f.jsx)(v,{unit:t,unitChange:r}),Object(f.jsx)(D.a,{variant:"contained",onClick:a,children:"Refresh"})]})},A=r(93),y=r(32);(j=d||(d={})).celsius="celsius",j.fahrenheit="fahrenheit";var R,w=r(405),F=function(e){return Math.floor(e-273.15)},S=function(e){return Math.floor(1.8*F(e)+32)},k=function(e){return e.forecast},L=Object(y.a)([k],(function(e){return e.forecastDataByDay})),T=Object(y.a)([k],(function(e){return e.carouselCursor})),B=Object(y.a)([k],(function(e){return e.pageSize})),P=Object(y.a)([k],(function(e){return e.temperatureUnit})),N=Object(y.a)([k],(function(e){return e.loadForecastsRequestStatus})),U=Object(y.a)([T],(function(e){return e<=0})),W=Object(y.a)([k],(function(e){return e.selectedForecastCardDate})),I=Object(y.a)([T,B,L],(function(e,t,r){return e+t===Object.keys(r).length})),q=Object(y.a)([L,T,B,P],(function(e,t,r,a){var n=[];return Object.entries(e).forEach((function(e){var t=e[1],r=t.reduce((function(e,t){return e+t.main.temp}),0)/t.length;n.push({date:e[0],averageTemperature:a===d.celsius?"".concat(F(r),"C"):"".concat(S(r),"F")})})),n.slice(t,t+r)})),H=Object(y.a)([L,W,P],(function(e,t,r){var a;return null===(a=e[t])||void 0===a?void 0:a.map((function(e){return Object(A.a)(Object(A.a)({},e),{},{main:Object(A.a)(Object(A.a)({},e.main),{},{temp:r===d.celsius?F(e.main.temp):S(e.main.temp)}),dt_txt:Object(w.a)(new Date(e.dt_txt),"p")})}))})),K=r(45),M=r(72),z=r(73),J=r.n(z),Y=r(185),V=r(39),G=Object({NODE_ENV:"production",PUBLIC_URL:"/weather-exercise-react",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_OPEN_WEATHER_BASE_URL:"http://api.openweathermap.org/data/2.5/forecast",REACT_APP_OPEN_WEATHER_API_KEY:"4ac2da6104057e179b0927dfeaf02128"}),Q=G.REACT_APP_OPEN_WEATHER_BASE_URL,X=G.REACT_APP_OPEN_WEATHER_API_KEY,Z=Q,$=X,ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"M\xfcnchen,DE";return"".concat(Z,"?q=").concat(e,"&appid=").concat($)},te={pageSize:3,carouselCursor:0,selectedForecastCardDate:"",forecastDataByDay:{},temperatureUnit:d.celsius,loadForecastsRequestStatus:a.Idle},re="forecast",ae=Object(V.b)("".concat(re,"/fetchForecastData"),Object(Y.a)(J.a.mark((function e(){var t,r;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ee(),e.next=3,fetch(t).then((function(e){return e.json()}));case 3:return r=e.sent,e.abrupt("return",r.list);case 5:case"end":return e.stop()}}),e)})))),ne=Object(V.c)({name:re,initialState:te,reducers:{incrementCursor:function(e){e.carouselCursor++},decrementCursor:function(e){e.carouselCursor--},temperatureUnitChange:function(e,t){e.temperatureUnit=t.payload},selectWeatherCard:function(e,t){e.selectedForecastCardDate=t.payload}},extraReducers:(R={},Object(M.a)(R,ae.pending,(function(e){e.loadForecastsRequestStatus=a.Loading})),Object(M.a)(R,ae.fulfilled,(function(e,t){e.forecastDataByDay=function(e){var t={};return e.forEach((function(e){var r=e.dt_txt.split(" ")[0];t[r]?t[r].push(e):t[r]=[e]})),t}(t.payload),e.selectedForecastCardDate=Object.keys(e.forecastDataByDay)[0],e.loadForecastsRequestStatus=a.Success})),Object(M.a)(R,ae.rejected,(function(e){e.loadForecastsRequestStatus=a.Failure})),R)}),ce=ne.actions,ie=ce.incrementCursor,oe=ce.decrementCursor,se=ce.temperatureUnitChange,ue=ce.selectWeatherCard;var le,de=Object(s.b)((function(e){return{temperatureUnit:P(e)}}),(function(e){return Object(K.b)({temperatureUnitChange:se,fetchForecasts:ae},e)}))(E),je=r(394);!function(e){e.left="left",e.right="right"}(le||(le={}));var be=r(395),fe=r(396),he=Object(u.a)({root:{marginRight:20,marginLeft:20}}),Oe=function(e){var t=e.direction,r=e.disabled,a=e.onButtonClick,n=he();return Object(f.jsxs)(je.a,{color:"primary",disabled:r,className:n.root,"aria-label":t,onClick:function(){return a(t)},children:[t===le.left&&Object(f.jsx)(be.a,{}),t===le.right&&Object(f.jsx)(fe.a,{})]})},xe=r(397),Ce=r(398),me=r(364),pe=Object(u.a)({root:{marginRight:10,marginLeft:10,minWidth:200,maxWidth:200},card:{textAlign:"center","&:hover, &:focus":{cursor:"pointer"}}}),ge=function(e){var t=e.cardData,r=e.onCardClick,a=pe();return Object(f.jsx)(xe.a,{onClick:function(){return r(t.date)},className:a.root,children:Object(f.jsxs)(Ce.a,{className:a.card,children:[Object(f.jsx)(me.a,{children:"Temperature"}),Object(f.jsx)(me.a,{children:Object(f.jsx)("strong",{children:t.averageTemperature})}),Object(f.jsx)(me.a,{children:Object(w.a)(new Date(t.date),"dd MMM. yyyy")})]})})},ve=Object(u.a)({root:{display:"flex",flexDirection:"row"}}),De=function(e){var t=e.weatherList,r=e.onCardClick,a=ve();return Object(f.jsx)("div",{className:a.root,children:null===t||void 0===t?void 0:t.map((function(e,t){return Object(f.jsx)(ge,{cardData:e,onCardClick:function(e){return r(e)}},t)}))})},_e=Object(u.a)({root:{display:"flex",alignItems:"center",justifyContent:"center"}}),Ee=function(e){var t=e.weatherList,r=e.onCarouselButtonClick,a=e.leftButtonDisabled,n=e.rightButtonDisabled,c=e.onCardClick,i=_e();return Object(f.jsxs)("div",{className:i.root,children:[Object(f.jsx)(Oe,{direction:le.left,disabled:a,onButtonClick:r}),Object(f.jsx)(De,{weatherList:t,onCardClick:c}),Object(f.jsx)(Oe,{direction:le.right,disabled:n,onButtonClick:r})]})},Ae=function(e){var t=e.selectWeatherCard,r=e.carouselLeftArrowDisabled,a=e.carouselRightArrowDisabled,n=e.weatherList,c=e.carouselRightArrowClicked,i=e.carouselLeftArrowClicked;return Object(f.jsx)(Ee,{onCardClick:function(e){return t(e)},rightButtonDisabled:a,leftButtonDisabled:r,weatherList:n,onCarouselButtonClick:function(e){e===le.right?c():i()}})},ye=Object(s.b)((function(e){return{weatherList:q(e),carouselLeftArrowDisabled:U(e),carouselRightArrowDisabled:I(e)}}),(function(e){return Object(K.b)({carouselRightArrowClicked:ie,carouselLeftArrowClicked:oe,selectWeatherCard:ue},e)}))(Ae),Re=r(399),we=r(400),Fe=r(201),Se=r(202),ke=r(96),Le=r(204),Te=Object(u.a)({chart:{margin:"0 auto",marginTop:50},unit:{textAlign:"center"}}),Be=function(e){var t=e.selectedCardData,r=e.temperatureUnit,a=Te();return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(Re.a,{width:800,height:500,className:a.chart,children:Object(f.jsxs)(we.a,{data:t,children:[Object(f.jsx)(Fe.a,{dataKey:"dt_txt"}),Object(f.jsx)(Se.a,{}),Object(f.jsx)(ke.a,{}),Object(f.jsx)(Le.a,{dataKey:"main.temp",fill:"#8884d8"})]})}),Object(f.jsx)(me.a,{className:a.unit,children:r})]})},Pe=Object(s.b)((function(e){return{temperatureUnit:P(e),selectedCardData:H(e)}}),(function(e){return Object(K.b)({},e)}))(Be),Ne=Object(u.a)({root:{paddingTop:150}}),Ue=function(e){var t=e.forecastsRequestStatus,r=e.fetchForecastAction;Object(n.useEffect)((function(){r()}),[r]);var c=Ne(),i=function(){return Object(f.jsxs)("div",{className:c.root,children:[Object(f.jsx)(de,{}),Object(f.jsx)(ye,{}),Object(f.jsx)(Pe,{})]})},o=function(){return Object(f.jsx)(l.a,{open:!0,autoHideDuration:6e3,children:Object(f.jsx)(x.a,{elevation:6,variant:"filled",severity:"error",children:"An error occurred while fetching data!"})})};return Object(f.jsxs)(f.Fragment,{children:[t===a.Loading&&Object(f.jsx)(O,{}),t===a.Success&&Object(f.jsx)(i,{}),t===a.Failure&&Object(f.jsx)(o,{})]})},We=Object(s.b)((function(e){return{forecastsRequestStatus:N(e)}}),(function(e){return Object(K.b)({fetchForecastAction:ae},e)}))(Ue),Ie=r(404);var qe=function(){return Object(f.jsx)(Ie.a,{children:Object(f.jsx)(We,{})})},He=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,413)).then((function(t){var r=t.getCLS,a=t.getFID,n=t.getFCP,c=t.getLCP,i=t.getTTFB;r(e),a(e),n(e),c(e),i(e)}))},Ke=Object(V.a)({reducer:{forecast:ne.reducer}});o.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(s.a,{store:Ke,children:Object(f.jsx)(qe,{})})}),document.getElementById("root")),He()}},[[363,1,2]]]);
//# sourceMappingURL=main.7b87148e.chunk.js.map